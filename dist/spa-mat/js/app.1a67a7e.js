(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{0:function(t,n,e){t.exports=e("LzkT")},"A0++":function(t,n,e){"use strict";var r=e("TOJS"),o=e.n(r);o.a},Hl11:function(t,n,e){},LzkT:function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"onhand",function(){return x}),e.d(r,"pending",function(){return N}),e.d(r,"target",function(){return U}),e.d(r,"getPendingById",function(){return V}),e.d(r,"EquipById",function(){return K});var o={};e.r(o),e.d(o,"SET_EQUIPMENT",function(){return H}),e.d(o,"SET_TARGET",function(){return D});var u={};e.r(u),e.d(u,"refresh",function(){return M}),e.d(u,"transfer",function(){return F}),e.d(u,"acceptance",function(){return J}),e.d(u,"fetchTarget",function(){return Z});var i={};e.r(i),e.d(i,"onhand",function(){return Y}),e.d(i,"pending",function(){return Q});var a={};e.r(a),e.d(a,"SET_MATERIAL",function(){return tt});var c={};e.r(c),e.d(c,"refresh",function(){return nt}),e.d(c,"acceptance",function(){return et});var s={};e.r(s),e.d(s,"getAuthUserStatus",function(){return ut});var d={};e.r(d),e.d(d,"authRequest",function(){return it}),e.d(d,"authLogin",function(){return at}),e.d(d,"authError",function(){return ct}),e.d(d,"authLogout",function(){return st});var f={};e.r(f),e.d(f,"login",function(){return dt}),e.d(f,"register",function(){return ft}),e.d(f,"logout",function(){return pt});var p={};e.r(p),e.d(p,"tasks",function(){return mt});var l={};e.r(l),e.d(l,"SET_TASKS",function(){return vt}),e.d(l,"ADD_TASK",function(){return wt});var h={};e.r(h),e.d(h,"refresh",function(){return kt}),e.d(h,"create_task",function(){return Lt});var g={};e.r(g),e.d(g,"revokes",function(){return bt});var m={};e.r(m),e.d(m,"SET_REVOKES",function(){return It}),e.d(m,"ADD_REVOKE",function(){return Tt});var v={};e.r(v),e.d(v,"refresh",function(){return yt}),e.d(v,"create_revoke",function(){return qt});var w={};e.r(w),e.d(w,"fetchPending",function(){return _t});var k={};e.r(k),e.d(k,"isLoading",function(){return Pt}),e.d(k,"hasPending",function(){return At});var L={};e.r(L),e.d(L,"setLoading",function(){return xt}),e.d(L,"setPending",function(){return Nt});e("rGqo"),e("oRQL"),e("0UuB"),e("r3/s"),e("ETwY"),e("33V3"),e("PUmY"),e("WKVH"),e("vaAy"),e("Iomn"),e("CF6H"),e("gBTy"),e("q5hK"),e("qrIa"),e("FfHN"),e("uWio"),e("M5GN"),e("7VtN"),e("CliU"),e("pKm8"),e("WWXe"),e("2oCq"),e("tg5a"),e("EHBt"),e("FiUO"),e("kzg4"),e("DC5c"),e("81dB"),e("74+S"),e("dHoL"),e("5/vb"),e("uK9C"),e("WLhn"),e("WQIU"),e("632X"),e("3HPs"),e("SH0w"),e("v2tj"),e("e5Zg"),e("ifhg"),e("y4yY"),e("eeoa"),e("qWPx"),e("O3aI"),e("IeMT"),e("OPPa"),e("JXdd"),e("GZIC"),e("72gz"),e("l6Fa"),e("853k"),e("qbXy"),e("Bt10"),e("Zrw1"),e("kI+G"),e("Jc2o"),e("k+pq"),e("yIhU"),e("Xx1C"),e("pVV8"),e("iTTW"),e("lDgw"),e("NRvT"),e("I6Vv"),e("csU/"),e("uK2o"),e("0EOz"),e("WSzb"),e("3mUJ"),e("gTSn"),e("Hqc8"),e("Y9Ea"),e("/MMa"),e("q+3l"),e("+FdI"),e("CkM9"),e("VwYb"),e("zBUS"),e("KsZc"),e("H9SI"),e("+i/6"),e("keWq"),e("Hl11"),e("fm0S");var S=e("Kw5r"),E=e("ZFgu");S["a"].use(E["p"],{config:{}});var b=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"q-app"}},[e("q-ajax-bar"),e("router-view")],1)},I=[];b._withStripped=!0;e("VRzm");var T={name:"App",components:{},created:function(){var t=window.localStorage["token"]||"";t&&(this.$setAxiosHeader(t),this.$axiosInstance.interceptors.response.use(void 0,function(t){return new Promise(function(n,e){throw 401===t.status&&t.config&&!t.config.__isRetryRequest&&(this.$store.dispatch("auth/logout"),this.$router.push("/login")),t})}))}},y=T,q=(e("A0++"),e("KHd+")),R=Object(q["a"])(y,b,I,!1,null,null,null),_=R.exports,P=e("L2JU"),A={onhand:[],pending:[],target:[]},x=(e("dRSK"),function(t){return t.onhand}),N=function(t){return t.pending},U=function(t){return t.pending},V=function(t,n){return function(n){return t.pending.find(function(t){return t.id===n})}},K=function(t){return function(n){return t.onhand.find(function(t){return t.id===n})}},H=function(t,n){t.onhand=n.onhand,t.pending=n.pending},D=function(t,n){console.log(n),t.target=n},$=(e("ls82"),e("yXPU")),z=e.n($),C=e("vDqi"),O=e.n(C),B=O.a.create({baseURL:"https://stp.chaiyapoj.site/api"}),G=function(t){B.defaults.headers.common["Authorization"]="Bearer "+t,console.log(B.defaults.headers)},W=function(t){t.app,t.router;var n=t.Vue;n.prototype.$axiosInstance=B,n.prototype.$setAxiosHeader=G},M=function(){var t=z()(regeneratorRuntime.mark(function t(n){var e,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=n.commit,e("setLoading",!0,{root:!0}),t.next=4,B.get("/equipment").then(function(t){e("setLoading",!1,{root:!0}),e("SET_EQUIPMENT",t.data),r.dispatch("fetchPending",{root:!0})}).catch(function(t){throw e("authError",t),t});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}(),F=function(t,n){var e=t.commit;return e("setLoading",!0,{root:!0}),B.post("/equipment/transfer",n).then(function(t){e("setLoading",!1,{root:!0}),resolve()}).catch(function(t){throw e("setLoading",!1,{root:!0}),t})},J=function(){var t=z()(regeneratorRuntime.mark(function t(n,e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=n.commit,r("setLoading",!0,{root:!0}),t.next=4,B.post("/equipment/pending/"+e.id,{is_accept:e.is_accept}).then(function(t){r("setLoading",!1,{root:!0})}).catch(function(t){throw r("setLoading",!1,{root:!0}),t});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(n,e){return t.apply(this,arguments)}}(),Z=function(t){var n=t.commit;return n("setLoading",!1,{root:!0}),B.get("/transfer/target").then(function(t){n("setLoading",!1,{root:!0})}).catch(function(t){throw n("setLoading",!1,{root:!0}),t})},j={namespaced:!0,state:A,getters:r,mutations:o,actions:u},X={onhand:[],pending:[],target:[]},Y=function(t){return t.onhand},Q=function(t){return t.pending},tt=function(t,n){t.onhand=n.onhand,t.pending=n.pending},nt=function(){var t=z()(regeneratorRuntime.mark(function t(n){var e,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=n.commit,e("setLoading",!0,{root:!0}),t.next=4,B.get("/material").then(function(t){e("setLoading",!1,{root:!0}),e("SET_MATERIAL",t.data),r.dispatch("fetchPending",{root:!0})}).catch(function(t){throw t});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}(),et=function(){var t=z()(regeneratorRuntime.mark(function t(n,e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=n.commit,r("setLoading",!0,{root:!0}),t.next=4,B.post("/material/pending/"+e.id,{is_accept:e.is_accept}).then(function(t){r("setLoading",!1,{root:!0})}).catch(function(t){throw r("setLoading",!1,{root:!0}),t});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(n,e){return t.apply(this,arguments)}}(),rt={namespaced:!0,state:X,getters:i,mutations:a,actions:c},ot={token:window.localStorage["token"]||"",status:"",userId:window.localStorage["userId"]||"",userName:window.localStorage["userName"]||"",fullName:window.localStorage["fullName"]||""},ut=function(t){return""!==t.userId},it=function(t){t.status="loading"},at=function(t,n){t.status="success",t.token=n.token,t.userId=n.user.id,t.fullName=n.user.firstname+" "+n.user.lastname,t.userName=n.user.username},ct=function(t){t.status="error",t.userId="",t.token="",t.userName=""},st=function(t){t.status="logout",t.token="",t.userId="",t.userName=""},dt=function(t,n){var e=t.commit;return e("setLoading",!0,{root:!0}),B.post("v1/login",n).then(function(t){return e("setLoading",!1,{root:!0}),e("authLogin",{token:t.data.token,user:t.data.user}),lt(t.data),G(t.data.token),Promise.resolve(t)}).catch(function(t){throw e("setLoading",!1,{root:!0}),t})},ft=function(t,n){t.commit;return B.post("register",n).then(function(t){}).catch(function(t){console.error("register error: ",t)})},pt=function(t,n){var e=t.commit;return B.get("v1/logout").then(function(t){e("authLogout"),lt()}).catch(function(t){console.error("logout errors: ",t)})},lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?(window.localStorage["token"]=t.token,window.localStorage["userId"]=t.user.id,window.localStorage["userName"]=t.user.username,window.localStorage["fullName"]=t.user.firstname+" "+t.user.lastname):(window.localStorage.removeItem("token"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("userName"),window.localStorage.removeItem("fullName"))},ht={namespaced:!0,state:ot,getters:s,mutations:d,actions:f},gt={tasks:[]},mt=function(t){return t.tasks},vt=function(t,n){t.tasks=n.data},wt=function(t,n){t.tasks.push(n)},kt=function(t){var n=t.commit;n("setLoading",!0,{root:!0}),B.get("/task").then(function(t){n("SET_TASKS",t.data),n("setLoading",!1,{root:!0})}).catch(function(t){return console.log(t),n("setLoading",!1,{root:!0}),B})},Lt=function(t,n){var e=t.commit;return e("setLoading",!0,{root:!0}),B.post("/task",n).then(function(t){return e("setLoading",!1,{root:!0}),Promise.resolve(t)}).catch(function(t){throw e("setLoading",!1,{root:!0}),t})},St={namespaced:!0,state:gt,getters:p,mutations:l,actions:h},Et={revokes:[]},bt=function(t){return t.revokes},It=function(t,n){t.revokes=n.data},Tt=function(t,n){t.revokes.push(n)},yt=function(t){var n=t.commit;n("setLoading",!0,{root:!0}),B.get("/revoke").then(function(t){n("SET_REVOKES",t.data),n("setLoading",!1,{root:!0})}).catch(function(t){return console.log(t),n("setLoading",!1,{root:!0}),B})},qt=function(t,n){var e=t.commit;return e("setLoading",!0,{root:!0}),B.post("/revoke",n).then(function(t){return e("setLoading",!1,{root:!0}),Promise.resolve(t)}).catch(function(t){throw e("setLoading",!1,{root:!0}),t})},Rt={namespaced:!0,state:Et,getters:g,mutations:m,actions:v},_t=function(t){var n=t.commit;return B.get("v1/pending").then(function(t){n("setPending",t.data)})},Pt=function(t){return t.isLoading},At=function(t){return{equipment:{alert:t.pending.equipment>0,count:t.pending.equipment},material:{alert:t.pending.material>0,count:t.pending.material}}},xt=function(t,n){t.isLoading=n},Nt=function(t,n){t.pending=n},Ut={isLoading:!1,notification:0,pending:{equipment:0,material:0}};S["a"].use(P["a"]);var Vt=new P["a"].Store({namespaced:!0,actions:w,state:Ut,getters:k,mutations:L,modules:{auth:ht,task:St,revoke:Rt,equipment:j,material:rt}}),Kt=Vt,Ht=e("jE9Z"),Dt=function(t,n,e){Kt.getters["auth/getAuthUserStatus"]?e("/"):e()},$t=function(t,n,e){Kt.getters["auth/getAuthUserStatus"]?e():e("/login")},zt=[{path:"/login",component:function(){return e.e(1).then(e.bind(null,"g8kD"))},beforeEnter:Dt},{path:"/",component:function(){return e.e(0).then(e.bind(null,"GirD"))},beforeEnter:$t,children:[{path:"/",component:function(){return e.e(3).then(e.bind(null,"kmF/"))},meta:{title:"Feed"}}]},{path:"/task",component:function(){return e.e(0).then(e.bind(null,"GirD"))},beforeEnter:$t,children:[{path:"/",component:function(){return e.e(4).then(e.bind(null,"430k"))},meta:{title:"งานติดตั้ง"}},{path:"create",component:function(){return e.e(5).then(e.bind(null,"v7EU"))},meta:{title:"บันทึกข้อมูลงาน"}}]},{path:"/revoke",component:function(){return e.e(0).then(e.bind(null,"GirD"))},beforeEnter:$t,children:[{path:"/",component:function(){return e.e(6).then(e.bind(null,"IazK"))},meta:{title:"งานถอน"}},{path:"create",component:function(){return e.e(7).then(e.bind(null,"jEnf"))},meta:{title:"บันทึกข้อมูลงาน"}}]},{path:"/equipment",component:function(){return e.e(0).then(e.bind(null,"GirD"))},beforeEnter:$t,children:[{path:"/",component:function(){return e.e(8).then(e.bind(null,"VsSZ"))},meta:{title:"อุปกรณ์"}}]},{path:"/material",component:function(){return e.e(0).then(e.bind(null,"GirD"))},beforeEnter:$t,children:[{path:"/",component:function(){return e.e(9).then(e.bind(null,"lpRx"))},meta:{title:"วัสดุ"}}]},{path:"*",component:function(){return e.e(1).then(e.bind(null,"g8kD"))}}];S["a"].use(Ht["a"]);var Ct=new Ht["a"]({mode:"hash",base:"",scrollBehavior:function(){return{y:0}},routes:zt}),Ot=Ct,Bt=function(){var t="function"===typeof Kt?Kt():Kt,n="function"===typeof Ot?Ot({store:t}):Ot;t.$router=n;var e={el:"#q-app",router:n,store:t,render:function(t){return t(_)}};return{app:e,store:t,router:n}},Gt=e("QcY1"),Wt=e.n(Gt),Mt=function(t){var n=t.Vue;n.use(Wt.a),n.cordova.on("deviceready",function(){console.log("Cordova : device is ready !"),screen.orientation.lock("portrait")})},Ft={store:Kt,install:function(t,n){t.prototype.$myStore=Kt}};function Jt(){return window.hasOwnProperty("cordova")}var Zt=function(t){var n=t.Vue;n.prototype.$notify=E["a"],n.prototype.$date=E["o"],n.prototype.$isCordova=Jt(),n.use(Ft)},jt=e("Hc5T"),Xt=e.n(jt),Yt=function(t){var n=t.Vue;n.use(Xt.a)},Qt=e("hoI+"),tn=function(t){t.app,t.router;var n=t.Vue;n.use(Qt["a"],{name:"Timeago",locale:"th",locales:{th:e("Pk+z")}})},nn=Bt(),en=nn.app,rn=nn.store,on=nn.router;[Mt,W,Zt,Yt,tn].forEach(function(t){t({app:en,router:on,store:rn,Vue:S["a"],ssrContext:null})}),new S["a"](en)},TOJS:function(t,n,e){},fm0S:function(t,n,e){}},[[0,11,10]]]);